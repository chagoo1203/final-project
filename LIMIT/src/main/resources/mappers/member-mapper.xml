<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">
	<resultMap id="memberResultSet" type="member">
		<result column="USER_ID" property="userId" />
		<result column="USER_PWD" property="userPwd" />
		<result column="USER_NAME" property="userName" />
		<result column="EMAIL" property="email" />
		<result column="GENDER" property="gender" />
		<result column="BIRTH_DATE" property="birthDate" />
		<result column="PHONE" property="phone" />
		<result column="ADDRESS" property="address" />
		<result column="ENROLL_DATE" property="enrollDate" />
		<result column="MODIFY_DATE" property="modifyDate" />
		<result column="STATUS" property="status" />
		<result column="NICKNAME" property="nickName" />
	
	</resultMap>
		<resultMap id="productResultSet" type="product">
		<result column="PRODUCT_NO" property="productNo" />
		<result column="BRAND_NAME" property="brandName" />
		<result column="PRODUCT_NAME" property="productName" />
		<result column="LIKES" property="likes" />
		<result column="COUNT" property="count" />
		<result column="STATUS" property="status" />
		<result column="RELEASE_PRICE" property="releasePrice" />
		<result column="PRODUCT_TYPE_NAME" property="productTypeName" />
		<result column="TITLEIMG" property="titleImg" />
	
	</resultMap>
	
	<select id="loginMember" parameterType="member" resultMap="memberResultSet">
		SELECT
				USER_ID,
				USER_PWD,
				USER_NAME,
				EMAIL,
				GENDER,
				BIRTH_DATE,
				PHONE,  
				ADDRESS,
				ENROLL_DATE,
				MODIFY_DATE,
				STATUS,
				NICKNAME
		  FROM
		  		MEMBER
		 WHERE
		 		USER_ID = #{ userId }
		   AND STATUS = 'Y' 
     </select>
     <select id="idCheck" resultType="_int">
		SELECT	COUNT(*)
		FROM	MEMBER
		WHERE	USER_ID = #{checkId}	

	</select>
	
     <select id="nickCheck" resultType="_int">
		SELECT	COUNT(*)
		FROM	MEMBER
		WHERE	NICKNAME = #{checkNick}	

	</select>
	<insert id="insertMember">
		INSERT
		  INTO
		  		MEMBER
		  		(
		  		USER_ID,
		  		USER_PWD,
		  		USER_NAME,
		  		EMAIL,
		  		BIRTH_DATE,
		  		PHONE,
		  		ADDRESS,
		  		NICKNAME,
		  		GENDER
		  		)
		VALUES
				(
				#{ userId },
				#{ userPwd },
				#{ userName },
				#{ email },
				#{ birthDate },
				#{ phone },
				#{ address },
				#{ nickName },
				#{ gender }
				)

	</insert>
	
	<select id="selectTopBoardList" resultMap="productResultSet">
 	 	SELECT PRODUCT_NO, PRODUCT_NAME, COUNT, FILE_PATH||CHANGE_NAME TITLEIMG, LIKES, RELEASE_PRICE, PRODUCT_TYPE_NAME, BRAND_NAME
		  FROM PRODUCT P
		  JOIN ATTACHMENT ON(PRODUCT_NO = REF_NO)
		 WHERE P.STATUS = 'Y'
		   AND FILE_LEVEL = 1
		   AND TYPE_NO = 1
		 ORDER BY RELEASE_DATE DESC
	</select>
  
  
</mapper>